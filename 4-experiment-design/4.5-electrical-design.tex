\pagebreak
\subsection{Electrical Design}
The electrical design provides the hardware required for the implementation of the software, the sensors for the control system and furthermore a communication interface to the BEXUS system. A global diagram with the electrical interfaces between the IRISC experiment and BEXUS balloon are shown in figure \ref{fig:elec-ACD}. %The main interfaces are the E-Link and the power. But also, the camera's/ telescope should be able to watch the sky from the gondola.}}
\vspace{-.5cm}
\begin{figure}[H]
	\centering
	\includegraphics[width=.6\textwidth]{4-experiment-design/img/electrical/ArchitectureContext.png}
	\caption{Electrical architecture context diagram.}
	\label{fig:elec-ACD}
\end{figure}


\subsubsection{Block Diagram}
\label{sec:4.5.1}
The architecture interconnect diagram of the electrical design is shown in figure \ref{fig:elec-AID}. The main controller is the Raspberry Pi. There is external storage for the obtained images. To stabilize the pictures the gyroscopes (relative) and encoders (absolute) are used. This will give enough information to stabilize the camera during one picture (accuracy $<$ 0.5 arcseconds required to achieve requirement P.8). Because the gondola also moves, a star tracker and GPS are used to measure this. Potentionally, an accelerometer and a compass will be used for additional complementary data. These only have to be accurate enough to have the target in the field of view of the camera ($<$ 0.5 degrees for the star tracker (P.9), $<$ 5 meters for the GPS (P.10)).
\vspace{-.5cm}
\begin{figure}[H]
	\centering
	\includegraphics[width=.85\textwidth]{4-experiment-design/img/electrical/ArchitectureInterconnect.png}
	\caption{Electrical architecture interconnect diagram.}
	\label{fig:elec-AID}
\end{figure}

\subsubsection{Motor-controller \& Motor}
\st{When putting a PWM signal on a DC-motor, the position of the DC-motor can be controlled as well as the speed between two positions. The inputs of the motors will always be inverted to each other. This is how a servo motor works as well and will be implemented to position the telescope.\\

The amount of steps per duty cycle of the pwm signal is 12 bits with the PCA9685 chip. This means $2^{12}$ steps between full on and full off. This will result that the motors can turn very very slowly.\\

Then the signal will be amplified in current with a L298 motor driver (H-bridge). This signal will be delivered to a DC-motor which is geared with 1:312. There will be an encoder before and after the gearbox. As most high encoders aren't able to measure below 5 arcseconds. Measuring before the gearbox helps to take smaller steps.\\

The chosen encoder is an AMT23. This encoder has $2^{14}$ positions. When measuring before the gearbox, each step corresponds with 0.25 arcseconds. But because the motor can bounce between two bits the effective resolution is 0.5 arcseconds. The second encoder behind the gearbox has at least 312 steps per rotation, this way the position of the telescope can be measured exactly. Since the encoders are absolute encoders and measure independently of the OBC, a watchdog reboot will not affect these measurements.}

\hl{The motor has been changed to a stepper motor. But due to the lack of which stepper, the electrical circuit has not been made yet. There are multiple microstep controllers that could be used. The stepper has to be able to rotate the telescope with a speed of 700\,arcseconds per second, with an accuracy of atleast 1 arcsecond. The main problem at this stage is that the electrical team does not know how much force is needed before the gears including the lose. The "SM-42BYG011-25" stepper, which was our first option, will probably not be able to met all these requirements.}\\

\hl{Depending on the amount of microsteps needed, the controller will be chosen as soon as the final stepper is defined. The output of the controller will then be amplified by voltage and current through a H-bridge.}

\subsubsection{Encoders}
\hl{The chosen absolute encoder is an AMT23 with $2^{14}$ positions. One is located directly at the output of the stepper and the other one after the gearbox. Due to this a high accuracy (at least 0.25 arcseconds) can be achieved, while also be able to determine the exact position of the telescope, relative to the gondola. Since the encoders are absolute encoders and measure independently of the OBC, a watchdog reboot will not affect these measurements.}\\

\hl{The chosen encoders has been tested and work as expected.}


\subsubsection{Gyroscopes}
\st{We are currently talking to Honeywell to borrow the GG1320AN Digital Ring Laser Gyroscopes. This will improve the design by a lot and the previous designed gyroscopes below will no longer be used.\\

The current defined gyroscope is the ADXRS624. The main parameter is the noise from the gyroscope is the noise, which is 0.04\,$^\circ/ \sqrt{f_s}$, with $f_s$ being the sampling frequency. This means that a sampling frequency of 80 kHz, this system should be able to stay within the 0.5 arcseconds accuracy. For redundancy it might be necessary to have a dedicated microcontroller for the signal processing. This chip can only measure differences from its 0$^\circ$ position up to 75$^\circ$, but this should be sufficient enough as we can reset the 0$^\circ$ position between images.\\

This chip is analog and must be read out by an ADC that is able to read out the signal with a high enough accuracy on that specific sampling frequency. For this the AD7175 ADC is chosen. With a sampling frequency of 250,000\,Hz the effective resolution is 20.1 bits or 8.7\,$\mu$V. The gyroscope gives a change is voltage of 18\,$\mu$V per arcsecond. Thus everything below 9\,$\mu$V should be sufficient to measure with 0.5 arcseconds accuracy.}

%TODO : ADD NEW ONES

\hl{}

\subsubsection{IMU}
\hl{The accelerator, compass (magnetometer) and additional gyroscope is added in the form of an IMU. All these sensors are for redundancy and/ or housekeeping data. It is not planned to use it, but if needed this data is available.}

\subsubsection{GPS}
\hl{With the GPS the location and altitude can be determined. This is done with the uBlox NEO M8N. The accuracy is within 1.5 meters, which is within the requirements. A small error will not give a completely different night sky, thus this is enough for this application. The chosen GPS has been tested and work as expected.}

\subsubsection{Connectors and cables}
\hl{The PCB has CLIK-MATE MOLEX connectors for the data signals going through a cable harness to D-SUB connectors on the outside of the electronics box. Except for Ethernet, which will be connected through a normal Ethernet connector. The camera's are connected to the USB, which will be mechanically locked into place. The interface to the outside will be done with a D-SUB connectors. The power cables will be in a separate cable harness to the outside of the electronics box. Here two power input connectors are located, in order to switch easily between power supplies. The cables towards the steppers are in the same cable harness, but will be connected to the outside with power D-SUB connectors. Almost all external components have cables directly connected to it without connectors, except for the encoders, these are connected with CLIK-MATE MOLEX connectors.}

%\subsubsection{Star tracker}
%TODO : ADD THIS DECRIPTION
%\colorbox{yellow}{\parbox{\textwidth}{}}

\subsubsection{Schematic}
See Appendix c.

\subsubsection{PCB Layout}
There will be three PCB:s, which are listed below:

\begin{itemize}
	\item 	PCB A: Power system, motor control \& temperature actuator control.
	\item	PCB B: Accelerometer, GPS, compass, temperature sensors
	\item 	PCB C: Gyroscopes
\end{itemize}


All three PCBÂ´s will be placed in the electronics box. PCB C will be placed further away from PCB A and B, to minimize disturbances for the gyroscopes. See figure \ref{fig:electronic-box}.

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.5]{4-experiment-design/img/electrical/ElectricalBox.png}
	\caption{An basic overview of the electronics boxes.}
	\label{fig:electronic-box}
\end{figure}


\raggedbottom
