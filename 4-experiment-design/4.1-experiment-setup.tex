\subsection{Experiment Setup} \label{Experiment_Setup}

%\colorbox{orange}{\parbox{\textwidth}{I know this is more like the SUNBYTE structure and not so much like the EXIST one, but in this particular case I prefer the readability of SUNBYTE}}



%very general experiment setup
The experiments mounts a telescope with an attached CMOS sensor inside the gondola, looking out as shown in figure \ref{fig::4-1_CAD}. The telescope is mounted on a gimbal system that provides stabilisation along two axes (three if required, depending on simulation results, hardware is available) and tracking in three dimensions. The sensor/telescope/gimbal system will be shielded from the Sun's radiation and climatised in order to provide the required operation temperatures. This is achieved by using Peltier elements where heating or cooling may be necessary (e.\,g.~the sensor) and heating pads where there is only a chance of freezing (e.\,g.~the moving parts of the gimbal). The general setup with data flows can be seen in figure \ref{fig::4-1_block_diagram}. The individual sections of the experiment are described below.

\begin{figure}[h]
	\centering
	\includegraphics[width=0.7\linewidth]{4-experiment-design/img/mechanical/iso0.png}
	\caption{CAD-model of the experiment}
	\label{fig::4-1_CAD}
\end{figure}


\subsubsection{Telescope and CMOS sensor}
% telescope and CMOS sensor
The telescope chosen is a Sky-Watcher~BKP~130~DS (see figure \ref{fig::4.1-telescope}), a parabolic Newtonian reflector with a focal length of 650\,mm, an optical diameter of 130\,mm and therefore featuring an aperture ratio of $f/5$. 

The imaging sensor used is ZWO ASI183MM (mono) (see figure \ref{fig::4.1-sensor}), a CMOS sensor with only one channel (mono, not color) with a resolution of 20.18\,MP (5496x3672), a sensor size of 13.2x8.8\,mm (diagonal: 15.86\,mm) and a pixel size of 2.4x2.4\,$\mu$m. To limit the wavelength bandwidth imaged, an IR filter that filters out any wavelengths below 720\,nm is used in order to use the sensor as a NIR camera.

The imaging spectrum of the NIR imaging sensor is illustrated in figure \ref{fig::4.1-NIR_spectrum}.

\begin{figure}[h]
	\centering
	\begin{minipage}[t]{0.3\linewidth}
		\centering
		\includegraphics[width=1.0\linewidth]{4-experiment-design/img/setup/SkyWatcher_BKP130DS}
		\caption{Sky-Watcher BKP~130~DS}
		\label{fig::4.1-telescope}
	\end{minipage}
	%\hfill
	\hspace{0.03\linewidth}
	\begin{minipage}[t]{0.3\linewidth}
		\centering
		\includegraphics[width=0.65\linewidth]{4-experiment-design/img/setup/ZWO_ASI183MM}
		\caption{ZWO ASI183MM (mono) (NIR camera)}
		\label{fig::4.1-sensor}
	\end{minipage}
	\hspace{0.03\linewidth}
	\begin{minipage}[t]{0.3\linewidth}
		\centering
		\includegraphics[width=0.7\linewidth]{4-experiment-design/img/setup/ZWO_ASI290MM_Mini}
		\caption{ZWO ASI290 Mini (mono) (guiding camera)}
		\label{fig::4.1-guiding_camera}
	\end{minipage}

\end{figure}

\begin{figure}[H]
	\centering
	\includegraphics[width=0.8\linewidth]{4-experiment-design/img/setup/IRISC_spectrum}
	\caption{Imaging spectrum of the NIR camera}
	\label{fig::4.1-NIR_spectrum}
\end{figure}

\begin{figure}[H]
	\centering
	\includegraphics[width=0.8\linewidth]{4-experiment-design/img/setup/CMOS_spectrum}
	\caption{Imaging spectrum of the guiding camera}
	\label{fig::4.1-CMOS_spectrum}
\end{figure}

This combination of telescope and sensor features the following specifications:

\begin{itemize}
	\item \textbf{Field of View (FoV):} the field of view determines the astronomical targets that can be observed. It depends on the sensor size and the focal length of the telescope. Naturally, there is a horizontal, a vertical and a diagonal field of view:
	\begin{align}
		\text{FoV}_\text{horizontal} &= \arctan \frac{\SI{13.2}{mm}}{\SI{650}{mm}} = \ang{1,16} \\
		\text{FoV}_\text{vertical} &= \arctan \frac{\SI{8.8}{mm}}{\SI{650}{mm}} = \ang{0,757} \\
		\text{FoV}_\text{diagonal} &= \arctan \frac{\SI{15,86}{mm}}{\SI{650}{mm}} = \ang{1,382}
	\end{align}
	\item \textbf{Sensor resolution:} the angular resolution per pixel defines the precision of the scientific data collected.
	\begin{align}
		\text{Resolution} = \arctan \frac{\SI{2,4}{\um}}{\SI{650}{mm}} %= \SI{2,1155e-4}{\degree}
		 = \ang{;;0,7616}
	\end{align}
\end{itemize}

In order to examine the field of view in case the images sent down via downlink do not show the expected astronomical targets, an additional imaging sensor (ZWO ASI 290MM Mini) is installed on a guiding telescope that has a shorter focal length than the main telescope, implying a larger field of view (see figure \ref{fig::4.1-guiding_camera}). This sensor has the same sensitivity spectrum as the NIR camera, but it is not intended to block out any of the visible or NIR wavelengths in order to maximise the incident light and therefore the input signal. The spectrum is illustrated in figure \ref{fig::4.1-CMOS_spectrum}. With the help of these pictures it will be able to correct offset errors in the pointing mechanism of the control system due to e.\,g.~temperature drift of the sensors. In addition to this a small sanity camera with a wide angle lens (very large field of view) to keep track of the system status and detect possible errors if neither the NIR images nor the images from the guiding telescope show the expected results may be installed (not included in figures \ref{fig::4-1_CAD} and \ref{fig::4-1_block_diagram}).



\subsubsection{Electronics}

\begin{figure}[htb]
	\centering
	\includegraphics[width = \linewidth]{4-experiment-design/img/setup/Block_diagram_4-1}
	\caption{Block diagram of the experiment setup}
	\label{fig::4-1_block_diagram}
\end{figure}

% content of electronics box
The On-Board Computer is hosted by the electronics box that also features the onboard storage as well as the power supply unit, one set of gyroscopes and accelerometers to measure the movement of the gondola in order to provide input data to the control system, a GPS (for the control system), temperature sensors for housekeeping data and the heat management system inside the electronics box and heating elements. The sensors are located on a PCB designed by the electronics team, along with the power supply unit. In order to minimise disturbances by the power electronics and actuators, the gyroscopes are housed by a separate gyro-box that is shielded by a metal housing.



% data storage, electronics box
The CMOS sensor data is transmitted to the On-Board Computer where it is compressed with lossless compression and sent down via E-link and is also stored onboard the BEXUS balloon. The onboard storage is located in the electronics box that is designed considering compatibility with the harsh environmental conditions as well as redundancy. The mechanical structure that features the onboard storage ensures survival in case of shock due to hard impact when landing or if the BEXUS balloon lands in a lake or wetlands.

% thermal shielding - required?

\subsubsection{Control system}
% control system and actuation
The control system is responsible for tracking the target in the sky and stabilising the telescope during exposure. The tracking uses the current orientation of the gondola along the z-axis measured by a magnetometer as well as the orientation of the telescope within the gondola using encoders. Based on the current time and position (measured by the GPS system) as well as the operational field of view, the control system will select and track the target in order to point the telescope towards the astronomical targets and avoid star trails due to the sky's rotation as seen from an observer on Earth. The stabilisation system is responsible for keeping the telescope steady during exposure by counteracting the gondola movements measured by the gyrometers and accelerometers located on the sensor PCB in the electronics box.


\subsubsection{Attitude determination}
In order to determine the attitude of the gondola as it is rotating, the guiding camera will also function as a star tracker. As the relative orientation of the telescope with respect to the gondola is known, the gondola attitude can be calculated and used for the control system. The star tracker will be based on the system used by team GranaSAT which flew on Bexus 19. Their experiment was able to correctly identify 445 star fields and incorrectly identified 10. Several images had to be discarded due to a lack of found stars, but as their camera also acted as a horizon detector the FOV of stars was limited. As their software worked well and was run on-board on a Raspberry Pi the conditions are generally similar. Contact is established with members from team GranaSAT, and with their support the star tracker software will be adapted for IRISC. It should be noted that GranaSAT flew during night time, while IRISC will most likely be flying during day time. However, as the tracker will be used above the atmosphere it should be able to producer similar results anyway.

Another system that has been shown to work under similar conditions is the Daystar Star Tracker \cite{daystar}. It was flown during daytime on a NASA balloon, piggybacking on a test of the WASP system. It was shown that daytime star tracking is possible with good results. Some of the modifications that had to be applied was a high pass filter to remove any Rayleigh scattering, and efficient star identification algorithms. Also, some extra image processing was needed. As their project was well documented, and all their software is open source, this too will be used to aid the development of the star tracker for IRISC.

\hl{After some consideration and testing, the star tracker used will be a slightly modified version of the Tetra algorithm developed by Julian Brown of MIT. This algorithm was chosen based on it being both calibrationless and very fast for the lost-in-space problem \mbox{\cite{tetra}}. Small adjustments and tuning is done in order to maximize performance for the specific use case of IRISC.}

\hl{One of the main changes was the catalogue used by the algorithm. Originally, Tetra is made to use the Yale Bright Star Catalogue, with a total of 9110 stars. This works for a FoV greater than 10 degrees, as the algorithm needs at least 10 stars to resolve the attitude. This however does not fit the IRISC use case, as the FoV of the guiding scope will be approximately 2.3 \deg along the diagonal, resulting in about 4 sqare degrees. Instead, the algorithm is given the Hipparcos-2 catalogue, with a total of 117955 stars, and an average density of 3 stars per square degree. As such, an image from the guiding scope will include approximately 12 indexed stars, which is enough to find the attitude. The larger catalogue size increases the time to generate hash tables and such exponentially, but the time to resolve an image should not increase substantially.}



%\colorbox{red}{currently not included: guiding scope \& camera -> needs to be included!}













































\raggedbottom
